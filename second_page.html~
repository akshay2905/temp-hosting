<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Budget Revisions</title>

    <!-- Bootstrap Core CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">

    <link href="favicon.ico" rel="icon" type="image/x-icon" />

    <link href="css/sb-admin-2.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="css/custom.css" rel="stylesheet">
    <!--Font Awesom CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

    <link href='https://fonts.googleapis.com/css?family=PT+Sans' rel='stylesheet' type='text/css'>

    <link href="css/nv.d3.css" rel="stylesheet" type="text/css">
    <script src="js/d3.min.js" charset="utf-8"></script>
    <script src="js/nv.d3.js"></script>
    <script src="js/stream_layers.js"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <style>
    .chart_content{
        margin-top: 50px;
    }

    </style>
</head>

<body>

    <div id="wrapper">

        <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <div class="visualisation-title">
                    <h4>Visualisation Title</h4><br>
            </div>
            <div class="col-lg-12">
                <div class="row side-row">  
                            <div class="form-group scheme-select"  style="float:left;">
                              
                            </div>
                        </div>
                <div class="panel panel-default">
                    <div class="panel-heading description-heading">
                        <h2 class="panel-title"><i class="fa fa-list-alt"></i> Description</h2>
                    </div>
                    <div class="panel-body">
                        
                        Quisque sollicitudin sem augue, et tempor mi fringilla quis. Ut non gravida ligula. Maecenas elementum tortor ac sollicitudin porttitor. Vestibulum condimentum urna et ipsum vehicula, quis tempus sem vestibulum. Quisque in euismod nisl. Cras in diam in tortor consequat gravida vulputate congue dolor. Donec fermentum sapien sed sollicitudin dignissim.
                        

                    </div>
                </div>

                <button id="download" type="button " class="down btn btn-primary btn-lg btn-block"><i class="fa fa-download"></i> Download</button>
                


            </div>
            <div class="sidebar-bottom-content">
                      <a href="#" class="bottom-links"> <i class="fa fa-file"></i> Glossary</a>
                      <a href="#" class="bottom-links"><i class="fa fa-phone"></i> Contact Us</a>
                    
                </div>
        </div>
        <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper">
          <a href="#menu-toggle" class="btn btn-default" id="menu-toggle" ><i id="arrow" class="fa fa-arrow-left"></i></a>
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12" style="padding:0px;
    padding-right: 10px;">
                        

                        
                        <div class="row chart_content " >
                            <div class="col-lg-12">
                                <div class="panel panel-default">
                                    <div class="panel-heading chart-heading">
                                        <h2 class="panel-title"><i class="fa fa-line-chart"></i> Chart</h2>
                                    </div>
                                    <div class="panel-body">
                                        <div class="col-sm-12 chart-column">
                                             <div id="chart" class='chart-area with-3d-shadow with-transitions'>
    <svg></svg>
</div>
                                        </div>
                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                        

                        

                    </div>
                </div>
            </div>
        </div>
        <!-- /#page-content-wrapper -->

    </div>
    <!-- /#wrapper -->

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>
      <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
        $("#arrow").toggleClass("fa-arrow-right fa-arrow-left")


    });
    </script>
    
    <script>

    
    d3.csv('budget_revision3.csv', function(data) {
        
        var parseDate = d3.time.format("%Y").parse;
        
        formatted=data;
    
    var select = d3.select("body").select("div.scheme-select")
    .append("select")
    .attr("class","form-control")
    .attr("id","scheme-select")
      .on("change", function() { var scheme=d3.select("#scheme-select").property("value");
         redraw(scheme)});
  
  select
  .selectAll("option")
      .data(d3.map(data, function(d){return d.Scheme;}).keys())
    .enter().append("option")
    .attr("class","left-selection")
      .attr("value", function(d) { return d; })
      .text(function(d) { return d; })
      .style("margin","0px 0px 0px 0px");
      
  
var scheme="NRLM";
        redraw(scheme);});
        

        function redraw(scheme){
            data=formatted;
          

             
       var nested = d3.nest()
    .key(function(d) { return d.Scheme; })
    .map(formatted)
  
  
    // get value from menu selection
    // the option values are set in HTML and correspond
    //to the [type] value we used to nest the data  
    var series =scheme;
  
    
    // only retrieve data from the selected series, using the nest we just created
    var data = nested[series];


        
    
        function get_values(name) {

    return [
        {
      key: "Actual Estimates",
      values: data.map(function(d) { 
        return { y:parseFloat(d.Actual_Budget),x:d.year};
      })
    }
    ,
    {
      key: "Revised Estimates",
      values: data.map(function(d) { 
        return { y:parseFloat(d.Revised_Budget),x:d.year};
     
      })
    },
    {
      key: "Budget",
      values: data.map(function(d) { 
        return { y:parseFloat(d.Budget),x:d.year};
     
      })
    }
  ];
    }

    var schemes = get_values();
       

        


   nv.addGraph(function() {
        var chart = nv.models.lineWithFocusChart();
        
        var yScale = d3.scale.linear();
  
       yScale.domain([-50,200]);
       chart.yScale().domain([-50, 200]);
        chart.useInteractiveGuideline(true);

        
       

        d3.select('#chart svg')
            .datum(schemes)
            .call(chart);
        
        nv.utils.windowResize(chart.update);

        return chart;
    });


}
    
</script>



</body>

</html>
